# LLVM BC Splitter

ä¸€ä¸ªç”¨äºåˆ†å‰² LLVM å­—èŠ‚ç ï¼ˆ.bcï¼‰æ–‡ä»¶çš„å·¥å…·ï¼Œå¯ä»¥å°†åŒ…å«å¤šä¸ªæ¨¡å—çš„å­—èŠ‚ç æ–‡ä»¶æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æ¨¡å—æ–‡ä»¶,å¹¶å°†.bcæ–‡ä»¶åˆ†åˆ«ç¼–è¯‘ä¸ºå¤šä¸ª.so

## åŠŸèƒ½ç‰¹æ€§

- ğŸ”§ **æ¨¡å—åˆ†å‰²**ï¼šå°†åŒ…å«å¤šä¸ªæ¨¡å—çš„ LLVM å­—èŠ‚ç æ–‡ä»¶æ‹†åˆ†ä¸ºå•ä¸ªæ¨¡å—æ–‡ä»¶
- ğŸ“Š **æ¨¡å—ç»Ÿè®¡**ï¼šæ˜¾ç¤ºè¾“å…¥æ–‡ä»¶ä¸­çš„æ¨¡å—æ•°é‡ä¿¡æ¯
- ğŸš€ **é«˜æ•ˆå¤„ç†**ï¼šå¿«é€Ÿå¤„ç†å¤§å‹å­—èŠ‚ç æ–‡ä»¶
- ğŸ“ **çµæ´»è¾“å‡º**ï¼šæ”¯æŒè‡ªå®šä¹‰æ–‡ä»¶åæ ¼å¼

## å®‰è£…è¦æ±‚

### å…ˆå†³æ¡ä»¶
- LLVM å¼€å‘å·¥å…·é“¾
- C++ ç¼–è¯‘å™¨ï¼ˆæ”¯æŒC++17ï¼‰
- CMake 3.10 æˆ–æ›´é«˜ç‰ˆæœ¬

### æ„å»ºæ­¥éª¤

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/wangzirui405/llvm_bc_splitter.git
cd llvm_bc_splitter

# æ ¹æ®æƒ…å†µæ›´æ”¹include/common.hé‡Œçš„Configç»“æ„ä½“

# åˆ›å»ºæ„å»ºç›®å½•
mkdir build && cd build

# é…ç½®å¹¶æ„å»º
cmake ..
make
```

## ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
build/bc_splitter input.bc test_libkn ï¼ˆ--clone/clearï¼‰
```

### å‚æ•°è¯´æ˜

- `input.bc`ï¼šè¾“å…¥çš„ LLVM å­—èŠ‚ç æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
- `test_libkn`ï¼šè¾“å‡ºæ–‡ä»¶å‰ç¼€ï¼ˆtest_libkn_group_xxx.bcï¼‰ï¼ˆå¿…éœ€ï¼‰
- `--clone`: é€‰æ‹©å…‹éš†æ¨¡å¼ï¼Œä¸å¡«åˆ™ä¸ºç®€åŒ–æ¨¡å¼ï¼ˆç®€åŒ–æ¨¡å¼æš‚ä¸ç»´æŠ¤ï¼‰
- `--clear`: æ¸…ç†æ„å»ºç¯å¢ƒ

### æ„å»ºçš„å·¥ä½œç›®å½•

```
workspace/
â”œâ”€â”€ config/    // æš‚æ— 
â”œâ”€â”€ input/     // è¾“å…¥ä»¶
â”œâ”€â”€ logs/      // æ—¥å¿—
â”œâ”€â”€ output/    // è¾“å‡ºäº§ç‰©
â””â”€â”€  temp/      // æš‚æ— 
```

## é¡¹ç›®ç»“æ„

```
bc_splitter/
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ common.h
â”‚   â”œâ”€â”€ core.h
â”‚   â”œâ”€â”€ linker.h
â”‚   â”œâ”€â”€ logging.h
â”‚   â”œâ”€â”€ splitter.h
â”‚   â”œâ”€â”€ verifier.h
â”‚   â””â”€â”€ workdirectory.h
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ auxilium.cpp
â”‚   â”œâ”€â”€ common.cpp
â”‚   â”œâ”€â”€ core.cpp
â”‚   â”œâ”€â”€ linker.cpp
â”‚   â”œâ”€â”€ logging.cpp
â”‚   â”œâ”€â”€ main.cpp
â”‚   â”œâ”€â”€ splitter.cpp
â”‚   â”œâ”€â”€ verifier.cpp
â”‚   â””â”€â”€ workdirectory.cpp				
â””â”€â”€ README.md
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ‰¾ä¸åˆ° LLVM åº“**
   ```
   ç¡®ä¿å·²å®‰è£… LLVM å¼€å‘åŒ…ï¼š
   sudo apt-get install llvm-dev  # Ubuntu/Debian
   ```

2. **æ„å»ºå¤±è´¥**
   ```
   æ¸…ç†æ„å»ºç›®å½•åé‡è¯•ï¼š
   rm -rf build && mkdir build && cd build
   cmake .. && make
   ```

3. **æ— æ³•è¯»å–è¾“å…¥æ–‡ä»¶**
   ```
   ç¡®è®¤æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ LLVM å­—èŠ‚ç ï¼š
   file input.bc
   ```

## æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ç°æœ‰ Issue
2. æäº¤æ–°çš„ Issue
3. é€šè¿‡é‚®ä»¶è”ç³»ç»´æŠ¤è€…

## è‡´è°¢

æ„Ÿè°¢ LLVM ç¤¾åŒºæä¾›çš„å¼ºå¤§å·¥å…·é“¾æ”¯æŒã€‚

---

**é¡¹ç›®çŠ¶æ€**ï¼šç§¯æç»´æŠ¤  
**æœ€åæ›´æ–°**ï¼š2024å¹´
